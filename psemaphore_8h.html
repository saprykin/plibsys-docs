<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>plibsys: psemaphore.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">plibsys<span id="projectnumber">&#160;0.0.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search',false);
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_3a0b7d3a3e79d1c4236c98884ce82128.html">plibsys</a></li><li class="navelem"><a class="el" href="dir_23d65ea3503364d4c78c4aec4f946d15.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">psemaphore.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Semaphore routines.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="pmacros_8h_source.html">pmacros.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="ptypes_8h_source.html">ptypes.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="perror_8h_source.html">perror.h</a>&gt;</code><br />
</div>
<p><a href="psemaphore_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a57575c29ab46ef0a71aaebfd8d9b14e4" id="r_a57575c29ab46ef0a71aaebfd8d9b14e4"><td class="memItemLeft" align="right" valign="top"><a id="a57575c29ab46ef0a71aaebfd8d9b14e4" name="a57575c29ab46ef0a71aaebfd8d9b14e4"></a>
typedef enum <a class="el" href="#a718b02ef62d789250fc1f88707bd36fe">PSemaphoreAccessMode_</a>&#160;</td><td class="memItemRight" valign="bottom"><b>PSemaphoreAccessMode</b></td></tr>
<tr class="memdesc:a57575c29ab46ef0a71aaebfd8d9b14e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enum with semaphore creation modes. <br /></td></tr>
<tr class="separator:a57575c29ab46ef0a71aaebfd8d9b14e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36748cc8b83991bb2e2619f0358b2226" id="r_a36748cc8b83991bb2e2619f0358b2226"><td class="memItemLeft" align="right" valign="top">typedef struct PSemaphore_&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a36748cc8b83991bb2e2619f0358b2226">PSemaphore</a></td></tr>
<tr class="memdesc:a36748cc8b83991bb2e2619f0358b2226"><td class="mdescLeft">&#160;</td><td class="mdescRight">Semaphore opaque data structure.  <br /></td></tr>
<tr class="separator:a36748cc8b83991bb2e2619f0358b2226"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a718b02ef62d789250fc1f88707bd36fe" id="r_a718b02ef62d789250fc1f88707bd36fe"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a718b02ef62d789250fc1f88707bd36fe">PSemaphoreAccessMode_</a> { <a class="el" href="#a718b02ef62d789250fc1f88707bd36fea8d0ae3994e4cfb4cb2b84ed9f2bb86ed">P_SEM_ACCESS_OPEN</a> = 0
, <a class="el" href="#a718b02ef62d789250fc1f88707bd36fea429b81cf2fd687c5bc812037552c5180">P_SEM_ACCESS_CREATE</a> = 1
 }</td></tr>
<tr class="memdesc:a718b02ef62d789250fc1f88707bd36fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enum with semaphore creation modes.  <a href="#a718b02ef62d789250fc1f88707bd36fe">More...</a><br /></td></tr>
<tr class="separator:a718b02ef62d789250fc1f88707bd36fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acd3e52acdaf7167d0056d5b66dccf27b" id="r_acd3e52acdaf7167d0056d5b66dccf27b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> <a class="el" href="#a36748cc8b83991bb2e2619f0358b2226">PSemaphore</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acd3e52acdaf7167d0056d5b66dccf27b">p_semaphore_new</a> (const <a class="el" href="ptypes_8h.html#a248e4ab1104e259e4c6cf5714551060e">pchar</a> *name, <a class="el" href="ptypes_8h.html#a9ec24ad7a25b7ff36c75d4e74d46b85f">pint</a> init_val, <a class="el" href="#a57575c29ab46ef0a71aaebfd8d9b14e4">PSemaphoreAccessMode</a> mode, <a class="el" href="perror_8h.html#a0ca29fda52d5b97f70f61234be28f1cd">PError</a> **error)</td></tr>
<tr class="memdesc:acd3e52acdaf7167d0056d5b66dccf27b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new <a class="el" href="#a36748cc8b83991bb2e2619f0358b2226" title="Semaphore opaque data structure.">PSemaphore</a> object.  <br /></td></tr>
<tr class="separator:acd3e52acdaf7167d0056d5b66dccf27b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba2ba28054134cf5613cef5f373a8754" id="r_aba2ba28054134cf5613cef5f373a8754"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aba2ba28054134cf5613cef5f373a8754">p_semaphore_take_ownership</a> (<a class="el" href="#a36748cc8b83991bb2e2619f0358b2226">PSemaphore</a> *sem)</td></tr>
<tr class="memdesc:aba2ba28054134cf5613cef5f373a8754"><td class="mdescLeft">&#160;</td><td class="mdescRight">Takes ownership of a semaphore.  <br /></td></tr>
<tr class="separator:aba2ba28054134cf5613cef5f373a8754"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bf894d06e7a70739e1c53828ad2cdd2" id="r_a3bf894d06e7a70739e1c53828ad2cdd2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> <a class="el" href="ptypes_8h.html#af5cb791e13f977b94e0192f84a5f228b">pboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3bf894d06e7a70739e1c53828ad2cdd2">p_semaphore_acquire</a> (<a class="el" href="#a36748cc8b83991bb2e2619f0358b2226">PSemaphore</a> *sem, <a class="el" href="perror_8h.html#a0ca29fda52d5b97f70f61234be28f1cd">PError</a> **error)</td></tr>
<tr class="memdesc:a3bf894d06e7a70739e1c53828ad2cdd2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquires (P operation) a semaphore.  <br /></td></tr>
<tr class="separator:a3bf894d06e7a70739e1c53828ad2cdd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac36cfdc36e20e32ca80bdd4673763f9a" id="r_ac36cfdc36e20e32ca80bdd4673763f9a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> <a class="el" href="ptypes_8h.html#af5cb791e13f977b94e0192f84a5f228b">pboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac36cfdc36e20e32ca80bdd4673763f9a">p_semaphore_release</a> (<a class="el" href="#a36748cc8b83991bb2e2619f0358b2226">PSemaphore</a> *sem, <a class="el" href="perror_8h.html#a0ca29fda52d5b97f70f61234be28f1cd">PError</a> **error)</td></tr>
<tr class="memdesc:ac36cfdc36e20e32ca80bdd4673763f9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases (V operation) a semaphore.  <br /></td></tr>
<tr class="separator:ac36cfdc36e20e32ca80bdd4673763f9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a795b25891a2fcae06567311dd989cdfc" id="r_a795b25891a2fcae06567311dd989cdfc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a795b25891a2fcae06567311dd989cdfc">p_semaphore_free</a> (<a class="el" href="#a36748cc8b83991bb2e2619f0358b2226">PSemaphore</a> *sem)</td></tr>
<tr class="memdesc:a795b25891a2fcae06567311dd989cdfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees <a class="el" href="#a36748cc8b83991bb2e2619f0358b2226" title="Semaphore opaque data structure.">PSemaphore</a> object.  <br /></td></tr>
<tr class="separator:a795b25891a2fcae06567311dd989cdfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Semaphore routines. </p>
<dl class="section author"><dt>Author</dt><dd>Alexander Saprykin</dd></dl>
<p>A semaphore is a synchronization primitive which controls access to shared data from the concurrently running threads. Unlike a mutex (which is a particular case of a binary semaphore) it allows concurrent access not to only the one thread.</p>
<p>The semaphore has a counter which means the number of available resources (units). Before entering a critical section a thread must perform the so called P (acquire) operation: if the counter is positive it decrements the counter by 1 and continues execution; otherwise the thread is suspended until the counter becomes positive. Before leaving the critical section the thread must perform the so called V (release) operation: increments the counter by 1 and wakes up a waiting thread from the queue (if any).</p>
<p>You can think about the semaphore as a resource controller: the P operation takes one unit, while the V operation gives one unit back. The thread could not continue execution without taking a resource unit. By setting the initial semaphore counter value you can control how much concurrent threads can work with a shared resource.</p>
<p>This semaphore implementation is process-wide so you can synchronize not only the threads. But it makes this IPC primitive (actually like any other IPC primitive, as well) relatively heavy. Consider using a mutex or a spinlock instead if you do not need to cross a process boundary.</p>
<p>A process-wide semaphore is identified by its name across the system, thus it is also called a named semaphore. Use <a class="el" href="#acd3e52acdaf7167d0056d5b66dccf27b" title="Creates a new PSemaphore object.">p_semaphore_new()</a> to open the named semaphore and <a class="el" href="#a795b25891a2fcae06567311dd989cdfc" title="Frees PSemaphore object.">p_semaphore_free()</a> to close it.</p>
<p>Please note the following platform specific differences:</p>
<ul>
<li>Windows doesn't own IPC objects (processes own them), which means that a semaphore will be removed from the system after the last process or thread closes it (or after terminating all the processes and threads holding open semaphore).</li>
<li>UNIX systems own IPC objects. Because of that UNIX IPC objects can survive an application crash: an already used semaphore can be opened in a locked state and an application can fail into a deadlock or an inconsistent state. This could happen if you have not closed all the open semaphores explicitly before terminating the application.</li>
<li>IRIX allows to open several instances of a semaphore within the single process, but it will close the object after the first close call from any of the threads within the process.</li>
<li>AmigaOS has process-wide semaphores without actual tracking of counter, which means that semaphore behaves the same way as recursive mutex.</li>
<li>OpenVMS (as of 8.4 release) has declared prototypes for process-wide named semaphores but the actual implementation is broken.</li>
<li>OS/2 lacks support for process-wide named semaphores.</li>
<li>Syllable lacks support for process-wide named semaphores.</li>
<li>BeOS lacks support for process-wide named semaphores.</li>
</ul>
<p>Use the third argument as <a class="el" href="#a718b02ef62d789250fc1f88707bd36fea429b81cf2fd687c5bc812037552c5180" title="Creates semaphore, resets to a given value if exists.">P_SEM_ACCESS_CREATE</a> in <a class="el" href="#acd3e52acdaf7167d0056d5b66dccf27b" title="Creates a new PSemaphore object.">p_semaphore_new()</a> to reset a semaphore value while opening it. This argument is ignored on Windows. You can also take ownership of the semaphore with <a class="el" href="#aba2ba28054134cf5613cef5f373a8754" title="Takes ownership of a semaphore.">p_semaphore_take_ownership()</a> to explicitly remove it from the system after closing. </p>

<p class="definition">Definition in file <a class="el" href="psemaphore_8h_source.html">psemaphore.h</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a36748cc8b83991bb2e2619f0358b2226" name="a36748cc8b83991bb2e2619f0358b2226"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36748cc8b83991bb2e2619f0358b2226">&#9670;&#160;</a></span>PSemaphore</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct PSemaphore_ <a class="el" href="#a36748cc8b83991bb2e2619f0358b2226">PSemaphore</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Semaphore opaque data structure. </p>

<p class="definition">Definition at line <a class="el" href="psemaphore_8h_source.html#l00114">114</a> of file <a class="el" href="psemaphore_8h_source.html">psemaphore.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a718b02ef62d789250fc1f88707bd36fe" name="a718b02ef62d789250fc1f88707bd36fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a718b02ef62d789250fc1f88707bd36fe">&#9670;&#160;</a></span>PSemaphoreAccessMode_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#a718b02ef62d789250fc1f88707bd36fe">PSemaphoreAccessMode_</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enum with semaphore creation modes. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a718b02ef62d789250fc1f88707bd36fea8d0ae3994e4cfb4cb2b84ed9f2bb86ed" name="a718b02ef62d789250fc1f88707bd36fea8d0ae3994e4cfb4cb2b84ed9f2bb86ed"></a>P_SEM_ACCESS_OPEN&#160;</td><td class="fielddoc"><p>Opens an existing semaphore or creates one with a given value. </p>
<p><br  />
 </p>
</td></tr>
<tr><td class="fieldname"><a id="a718b02ef62d789250fc1f88707bd36fea429b81cf2fd687c5bc812037552c5180" name="a718b02ef62d789250fc1f88707bd36fea429b81cf2fd687c5bc812037552c5180"></a>P_SEM_ACCESS_CREATE&#160;</td><td class="fielddoc"><p>Creates semaphore, resets to a given value if exists. </p>
<p><br  />
 </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="psemaphore_8h_source.html#l00108">108</a> of file <a class="el" href="psemaphore_8h_source.html">psemaphore.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a3bf894d06e7a70739e1c53828ad2cdd2" name="a3bf894d06e7a70739e1c53828ad2cdd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bf894d06e7a70739e1c53828ad2cdd2">&#9670;&#160;</a></span>p_semaphore_acquire()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> <a class="el" href="ptypes_8h.html#af5cb791e13f977b94e0192f84a5f228b">pboolean</a> p_semaphore_acquire </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a36748cc8b83991bb2e2619f0358b2226">PSemaphore</a> *</td>          <td class="paramname"><span class="paramname"><em>sem</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="perror_8h.html#a0ca29fda52d5b97f70f61234be28f1cd">PError</a> **</td>          <td class="paramname"><span class="paramname"><em>error</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Acquires (P operation) a semaphore. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">sem</td><td><a class="el" href="#a36748cc8b83991bb2e2619f0358b2226" title="Semaphore opaque data structure.">PSemaphore</a> to acquire. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">error</td><td>Error report object, NULL to ignore. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE in case of success, FALSE otherwise. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>0.0.1 </dd></dl>

</div>
</div>
<a id="a795b25891a2fcae06567311dd989cdfc" name="a795b25891a2fcae06567311dd989cdfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a795b25891a2fcae06567311dd989cdfc">&#9670;&#160;</a></span>p_semaphore_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> void p_semaphore_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a36748cc8b83991bb2e2619f0358b2226">PSemaphore</a> *</td>          <td class="paramname"><span class="paramname"><em>sem</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees <a class="el" href="#a36748cc8b83991bb2e2619f0358b2226" title="Semaphore opaque data structure.">PSemaphore</a> object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sem</td><td><a class="el" href="#a36748cc8b83991bb2e2619f0358b2226" title="Semaphore opaque data structure.">PSemaphore</a> to free. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>0.0.1</dd></dl>
<p>It doesn't release an acquired semaphore, be careful to not to make a deadlock while removing the acquired semaphore. </p>

</div>
</div>
<a id="acd3e52acdaf7167d0056d5b66dccf27b" name="acd3e52acdaf7167d0056d5b66dccf27b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd3e52acdaf7167d0056d5b66dccf27b">&#9670;&#160;</a></span>p_semaphore_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> <a class="el" href="#a36748cc8b83991bb2e2619f0358b2226">PSemaphore</a> * p_semaphore_new </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ptypes_8h.html#a248e4ab1104e259e4c6cf5714551060e">pchar</a> *</td>          <td class="paramname"><span class="paramname"><em>name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ptypes_8h.html#a9ec24ad7a25b7ff36c75d4e74d46b85f">pint</a></td>          <td class="paramname"><span class="paramname"><em>init_val</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#a57575c29ab46ef0a71aaebfd8d9b14e4">PSemaphoreAccessMode</a></td>          <td class="paramname"><span class="paramname"><em>mode</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="perror_8h.html#a0ca29fda52d5b97f70f61234be28f1cd">PError</a> **</td>          <td class="paramname"><span class="paramname"><em>error</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new <a class="el" href="#a36748cc8b83991bb2e2619f0358b2226" title="Semaphore opaque data structure.">PSemaphore</a> object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">name</td><td>Semaphore name. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">init_val</td><td>Initial semaphore value. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">mode</td><td>Creation mode. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">error</td><td>Error report object, NULL to ignore. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to a newly created <a class="el" href="#a36748cc8b83991bb2e2619f0358b2226" title="Semaphore opaque data structure.">PSemaphore</a> object in case of success, NULL otherwise. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>0.0.1</dd></dl>
<p>The <em>init_val</em> is used only in one of following cases: a semaphore with the such name doesn't exist, or the semaphore with the such name exists but <em>mode</em> specified as <a class="el" href="#a718b02ef62d789250fc1f88707bd36fea429b81cf2fd687c5bc812037552c5180" title="Creates semaphore, resets to a given value if exists.">P_SEM_ACCESS_CREATE</a> (non-Windows platforms only). In other cases <em>init_val</em> is ignored. The <em>name</em> is system-wide, so any other process can open that semaphore passing the same name. </p>

</div>
</div>
<a id="ac36cfdc36e20e32ca80bdd4673763f9a" name="ac36cfdc36e20e32ca80bdd4673763f9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac36cfdc36e20e32ca80bdd4673763f9a">&#9670;&#160;</a></span>p_semaphore_release()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> <a class="el" href="ptypes_8h.html#af5cb791e13f977b94e0192f84a5f228b">pboolean</a> p_semaphore_release </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a36748cc8b83991bb2e2619f0358b2226">PSemaphore</a> *</td>          <td class="paramname"><span class="paramname"><em>sem</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="perror_8h.html#a0ca29fda52d5b97f70f61234be28f1cd">PError</a> **</td>          <td class="paramname"><span class="paramname"><em>error</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Releases (V operation) a semaphore. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">sem</td><td><a class="el" href="#a36748cc8b83991bb2e2619f0358b2226" title="Semaphore opaque data structure.">PSemaphore</a> to release. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">error</td><td>Error report object, NULL to ignore. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE in case of success, FALSE otherwise. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>0.0.1 </dd></dl>

</div>
</div>
<a id="aba2ba28054134cf5613cef5f373a8754" name="aba2ba28054134cf5613cef5f373a8754"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba2ba28054134cf5613cef5f373a8754">&#9670;&#160;</a></span>p_semaphore_take_ownership()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> void p_semaphore_take_ownership </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a36748cc8b83991bb2e2619f0358b2226">PSemaphore</a> *</td>          <td class="paramname"><span class="paramname"><em>sem</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Takes ownership of a semaphore. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sem</td><td>Semaphore to take ownership. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>0.0.1</dd></dl>
<p>If you take ownership of a semaphore object, <a class="el" href="#a795b25891a2fcae06567311dd989cdfc" title="Frees PSemaphore object.">p_semaphore_free()</a> will try to completely unlink it and remove from the system. This is useful on UNIX systems where the semaphore can survive an application crash. On the Windows platform this call has no effect.</p>
<p>The common usage of this call is upon application startup to ensure that the semaphore from the previous crash will be unlinked from the system. To do that, call <a class="el" href="#acd3e52acdaf7167d0056d5b66dccf27b" title="Creates a new PSemaphore object.">p_semaphore_new()</a>, take ownership of the semaphore object and remove it with the <a class="el" href="#a795b25891a2fcae06567311dd989cdfc" title="Frees PSemaphore object.">p_semaphore_free()</a> call. After that, create it again.</p>
<p>You can also do the same thing upon semaphore creation passing <a class="el" href="#a718b02ef62d789250fc1f88707bd36fea429b81cf2fd687c5bc812037552c5180" title="Creates semaphore, resets to a given value if exists.">P_SEM_ACCESS_CREATE</a> to <a class="el" href="#acd3e52acdaf7167d0056d5b66dccf27b" title="Creates a new PSemaphore object.">p_semaphore_new()</a>. The only difference is that you should already know whether this semaphore object is from the previous crash or not. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
