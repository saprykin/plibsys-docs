<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>plibsys: pcondvariable.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">plibsys<span id="projectnumber">&#160;0.0.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search',false);
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_3a0b7d3a3e79d1c4236c98884ce82128.html">plibsys</a></li><li class="navelem"><a class="el" href="dir_23d65ea3503364d4c78c4aec4f946d15.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">pcondvariable.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Condition variable.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="pmacros_8h_source.html">pmacros.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="ptypes_8h_source.html">ptypes.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="pmutex_8h_source.html">pmutex.h</a>&gt;</code><br />
</div>
<p><a href="pcondvariable_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a2f31b42db25ab36ec82a067aa632c374" id="r_a2f31b42db25ab36ec82a067aa632c374"><td class="memItemLeft" align="right" valign="top">typedef struct PCondVariable_&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2f31b42db25ab36ec82a067aa632c374">PCondVariable</a></td></tr>
<tr class="memdesc:a2f31b42db25ab36ec82a067aa632c374"><td class="mdescLeft">&#160;</td><td class="mdescRight">Condition variable opaque data structure.  <br /></td></tr>
<tr class="separator:a2f31b42db25ab36ec82a067aa632c374"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1f49c77c364b702a083e201792f893b6" id="r_a1f49c77c364b702a083e201792f893b6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> <a class="el" href="#a2f31b42db25ab36ec82a067aa632c374">PCondVariable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1f49c77c364b702a083e201792f893b6">p_cond_variable_new</a> (void)</td></tr>
<tr class="memdesc:a1f49c77c364b702a083e201792f893b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new <a class="el" href="#a2f31b42db25ab36ec82a067aa632c374" title="Condition variable opaque data structure.">PCondVariable</a>.  <br /></td></tr>
<tr class="separator:a1f49c77c364b702a083e201792f893b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7102665a3a2b39acc9c85b4b29bb9a4a" id="r_a7102665a3a2b39acc9c85b4b29bb9a4a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7102665a3a2b39acc9c85b4b29bb9a4a">p_cond_variable_free</a> (<a class="el" href="#a2f31b42db25ab36ec82a067aa632c374">PCondVariable</a> *cond)</td></tr>
<tr class="memdesc:a7102665a3a2b39acc9c85b4b29bb9a4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees <a class="el" href="#a2f31b42db25ab36ec82a067aa632c374" title="Condition variable opaque data structure.">PCondVariable</a> structure.  <br /></td></tr>
<tr class="separator:a7102665a3a2b39acc9c85b4b29bb9a4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaec2f00eb7ba85d35ccc0e933b549b7b" id="r_aaec2f00eb7ba85d35ccc0e933b549b7b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> <a class="el" href="ptypes_8h.html#af5cb791e13f977b94e0192f84a5f228b">pboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaec2f00eb7ba85d35ccc0e933b549b7b">p_cond_variable_wait</a> (<a class="el" href="#a2f31b42db25ab36ec82a067aa632c374">PCondVariable</a> *cond, <a class="el" href="pmutex_8h.html#a1ce4fbdacfc065e5a590dfa6b5688415">PMutex</a> *mutex)</td></tr>
<tr class="memdesc:aaec2f00eb7ba85d35ccc0e933b549b7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits for a signal on a given condition variable.  <br /></td></tr>
<tr class="separator:aaec2f00eb7ba85d35ccc0e933b549b7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29b41602182b80e8559fc2a7f0903aae" id="r_a29b41602182b80e8559fc2a7f0903aae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> <a class="el" href="ptypes_8h.html#af5cb791e13f977b94e0192f84a5f228b">pboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a29b41602182b80e8559fc2a7f0903aae">p_cond_variable_signal</a> (<a class="el" href="#a2f31b42db25ab36ec82a067aa632c374">PCondVariable</a> *cond)</td></tr>
<tr class="memdesc:a29b41602182b80e8559fc2a7f0903aae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emitts a signal on a given condition variable for one waiting thread.  <br /></td></tr>
<tr class="separator:a29b41602182b80e8559fc2a7f0903aae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ae463e1a66fd525306990c475353a8a" id="r_a7ae463e1a66fd525306990c475353a8a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> <a class="el" href="ptypes_8h.html#af5cb791e13f977b94e0192f84a5f228b">pboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7ae463e1a66fd525306990c475353a8a">p_cond_variable_broadcast</a> (<a class="el" href="#a2f31b42db25ab36ec82a067aa632c374">PCondVariable</a> *cond)</td></tr>
<tr class="memdesc:a7ae463e1a66fd525306990c475353a8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emitts a signal on a given condition variable for all the waiting threads.  <br /></td></tr>
<tr class="separator:a7ae463e1a66fd525306990c475353a8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Condition variable. </p>
<dl class="section author"><dt>Author</dt><dd>Alexander Saprykin</dd></dl>
<p>A condition variable is an inter-thread synchronization primitive, often used in the classical 'producers-consumers' concurrent data access models.</p>
<p>The main idea is to notify waiting thread(s) for some events before they can enter a critical section. Hence the name of the primitive: a thread enters the critical section upon an accomplished condition. Compare it with a mutex where the thread enters the critical section as soon as no one holds a lock.</p>
<p>Several threads can be notified at once, but only one of them can enter the critical section. The order of the threads in that case is implementation dependent.</p>
<p>As the thread enters the critical section upon a condition it still requires a mutex to guard its code against concurrent access from other threads. The mutex provided in pair with a condition variable will be automatically locked on the condition, the thread should unlock it explicitly after leaving the critical section. That mutex is unlocked while waiting for the condition and should be locked prior calling the condition waiting routine.</p>
<p>The waiting thread behavior: create a new condition variable with <a class="el" href="#a1f49c77c364b702a083e201792f893b6" title="Creates a new PCondVariable.">p_cond_variable_new()</a>, create and lock a mutex before a critical section and wait for a signal from another thread on this condition variable using <a class="el" href="#aaec2f00eb7ba85d35ccc0e933b549b7b" title="Waits for a signal on a given condition variable.">p_cond_variable_wait()</a>.</p>
<p>The signaling thread behavior: upon reaching event time emit a signal with <a class="el" href="#a29b41602182b80e8559fc2a7f0903aae" title="Emitts a signal on a given condition variable for one waiting thread.">p_cond_variable_signal()</a> to wake up a single waiting thread or <a class="el" href="#a7ae463e1a66fd525306990c475353a8a" title="Emitts a signal on a given condition variable for all the waiting threads.">p_cond_variable_broadcast()</a> to wake up all the waiting threads.</p>
<p>After emitting the signal only the one thread will get the locked mutex back to continue executing the critical section.</p>
<p>It is implementation dependent whether a thread will receive a missed signal (when a notification from the one thread was emitted prior another thread has been called for waiting), so do not rely on this behavior. </p>

<p class="definition">Definition in file <a class="el" href="pcondvariable_8h_source.html">pcondvariable.h</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a2f31b42db25ab36ec82a067aa632c374" name="a2f31b42db25ab36ec82a067aa632c374"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f31b42db25ab36ec82a067aa632c374">&#9670;&#160;</a></span>PCondVariable</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct PCondVariable_ <a class="el" href="#a2f31b42db25ab36ec82a067aa632c374">PCondVariable</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Condition variable opaque data structure. </p>

<p class="definition">Definition at line <a class="el" href="pcondvariable_8h_source.html#l00082">82</a> of file <a class="el" href="pcondvariable_8h_source.html">pcondvariable.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a7ae463e1a66fd525306990c475353a8a" name="a7ae463e1a66fd525306990c475353a8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ae463e1a66fd525306990c475353a8a">&#9670;&#160;</a></span>p_cond_variable_broadcast()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> <a class="el" href="ptypes_8h.html#af5cb791e13f977b94e0192f84a5f228b">pboolean</a> p_cond_variable_broadcast </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a2f31b42db25ab36ec82a067aa632c374">PCondVariable</a> *</td>          <td class="paramname"><span class="paramname"><em>cond</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Emitts a signal on a given condition variable for all the waiting threads. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cond</td><td>Condition variable to emit the signal on. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE on success, FALSE otherwise. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>0.0.1</dd></dl>
<p>After emitting the signal all the threads waiting for it will be waken up. </p>

</div>
</div>
<a id="a7102665a3a2b39acc9c85b4b29bb9a4a" name="a7102665a3a2b39acc9c85b4b29bb9a4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7102665a3a2b39acc9c85b4b29bb9a4a">&#9670;&#160;</a></span>p_cond_variable_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> void p_cond_variable_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a2f31b42db25ab36ec82a067aa632c374">PCondVariable</a> *</td>          <td class="paramname"><span class="paramname"><em>cond</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees <a class="el" href="#a2f31b42db25ab36ec82a067aa632c374" title="Condition variable opaque data structure.">PCondVariable</a> structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cond</td><td>Condtion variable to free. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>0.0.1 </dd></dl>

</div>
</div>
<a id="a1f49c77c364b702a083e201792f893b6" name="a1f49c77c364b702a083e201792f893b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f49c77c364b702a083e201792f893b6">&#9670;&#160;</a></span>p_cond_variable_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> <a class="el" href="#a2f31b42db25ab36ec82a067aa632c374">PCondVariable</a> * p_cond_variable_new </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new <a class="el" href="#a2f31b42db25ab36ec82a067aa632c374" title="Condition variable opaque data structure.">PCondVariable</a>. </p>
<dl class="section return"><dt>Returns</dt><dd>Pointer to a newly created <a class="el" href="#a2f31b42db25ab36ec82a067aa632c374" title="Condition variable opaque data structure.">PCondVariable</a> structure, or NULL if failed. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>0.0.1 </dd></dl>

</div>
</div>
<a id="a29b41602182b80e8559fc2a7f0903aae" name="a29b41602182b80e8559fc2a7f0903aae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29b41602182b80e8559fc2a7f0903aae">&#9670;&#160;</a></span>p_cond_variable_signal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> <a class="el" href="ptypes_8h.html#af5cb791e13f977b94e0192f84a5f228b">pboolean</a> p_cond_variable_signal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a2f31b42db25ab36ec82a067aa632c374">PCondVariable</a> *</td>          <td class="paramname"><span class="paramname"><em>cond</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Emitts a signal on a given condition variable for one waiting thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cond</td><td>Condition variable to emit the signal on. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE on success, FALSE otherwise. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>0.0.1</dd></dl>
<p>After emitting the signal only the one thread waiting for it will be waken up. Do not rely on a queue concept for waiting threads. Though the implementation is intended to be much close to a queue, it's not fairly enough. Due that any thread can be waken up, even if it has just called <a class="el" href="#aaec2f00eb7ba85d35ccc0e933b549b7b" title="Waits for a signal on a given condition variable.">p_cond_variable_wait()</a> while there are other waiting threads. </p>

</div>
</div>
<a id="aaec2f00eb7ba85d35ccc0e933b549b7b" name="aaec2f00eb7ba85d35ccc0e933b549b7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaec2f00eb7ba85d35ccc0e933b549b7b">&#9670;&#160;</a></span>p_cond_variable_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> <a class="el" href="ptypes_8h.html#af5cb791e13f977b94e0192f84a5f228b">pboolean</a> p_cond_variable_wait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a2f31b42db25ab36ec82a067aa632c374">PCondVariable</a> *</td>          <td class="paramname"><span class="paramname"><em>cond</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pmutex_8h.html#a1ce4fbdacfc065e5a590dfa6b5688415">PMutex</a> *</td>          <td class="paramname"><span class="paramname"><em>mutex</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Waits for a signal on a given condition variable. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cond</td><td>Condition variable to wait on. </td></tr>
    <tr><td class="paramname">mutex</td><td>Locked mutex which will remain locked after waiting. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE on success, FALSE otherwise. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>0.0.1</dd></dl>
<p>The calling thread will sleep until the signal on <em>cond</em> arrived. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
