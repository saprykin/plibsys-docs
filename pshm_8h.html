<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>plibsys: pshm.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">plibsys<span id="projectnumber">&#160;0.0.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search',false);
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_3a0b7d3a3e79d1c4236c98884ce82128.html">plibsys</a></li><li class="navelem"><a class="el" href="dir_23d65ea3503364d4c78c4aec4f946d15.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">pshm.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Shared memory.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="pmacros_8h_source.html">pmacros.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="ptypes_8h_source.html">ptypes.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="perror_8h_source.html">perror.h</a>&gt;</code><br />
</div>
<p><a href="pshm_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a5cf76ec703f7c61e51daa04db470a81f" id="r_a5cf76ec703f7c61e51daa04db470a81f"><td class="memItemLeft" align="right" valign="top"><a id="a5cf76ec703f7c61e51daa04db470a81f" name="a5cf76ec703f7c61e51daa04db470a81f"></a>
typedef enum <a class="el" href="#a442b1fac8b9fab89bc557518330d5569">PShmAccessPerms_</a>&#160;</td><td class="memItemRight" valign="bottom"><b>PShmAccessPerms</b></td></tr>
<tr class="memdesc:a5cf76ec703f7c61e51daa04db470a81f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enum with shared memory access permissions. <br /></td></tr>
<tr class="separator:a5cf76ec703f7c61e51daa04db470a81f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a242648937927f60bb00c5182324af26d" id="r_a242648937927f60bb00c5182324af26d"><td class="memItemLeft" align="right" valign="top">typedef struct PShm_&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a242648937927f60bb00c5182324af26d">PShm</a></td></tr>
<tr class="memdesc:a242648937927f60bb00c5182324af26d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shared memory opaque data structure.  <br /></td></tr>
<tr class="separator:a242648937927f60bb00c5182324af26d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a442b1fac8b9fab89bc557518330d5569" id="r_a442b1fac8b9fab89bc557518330d5569"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a442b1fac8b9fab89bc557518330d5569">PShmAccessPerms_</a> { <a class="el" href="#a442b1fac8b9fab89bc557518330d5569a246e6346dd1a012bd6f6d1d5c10bb702">P_SHM_ACCESS_READONLY</a> = 0
, <a class="el" href="#a442b1fac8b9fab89bc557518330d5569ac060911ed831a35bb52ffe420d6c99ae">P_SHM_ACCESS_READWRITE</a> = 1
 }</td></tr>
<tr class="memdesc:a442b1fac8b9fab89bc557518330d5569"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enum with shared memory access permissions.  <a href="#a442b1fac8b9fab89bc557518330d5569">More...</a><br /></td></tr>
<tr class="separator:a442b1fac8b9fab89bc557518330d5569"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afa9b9edfbcdb6fad5f187b405b32d9e5" id="r_afa9b9edfbcdb6fad5f187b405b32d9e5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> <a class="el" href="#a242648937927f60bb00c5182324af26d">PShm</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afa9b9edfbcdb6fad5f187b405b32d9e5">p_shm_new</a> (const <a class="el" href="ptypes_8h.html#a248e4ab1104e259e4c6cf5714551060e">pchar</a> *name, <a class="el" href="ptypes_8h.html#a25a50ea8cd288f85c8f366955716c080">psize</a> size, <a class="el" href="#a5cf76ec703f7c61e51daa04db470a81f">PShmAccessPerms</a> perms, <a class="el" href="perror_8h.html#a0ca29fda52d5b97f70f61234be28f1cd">PError</a> **error)</td></tr>
<tr class="memdesc:afa9b9edfbcdb6fad5f187b405b32d9e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new <a class="el" href="#a242648937927f60bb00c5182324af26d" title="Shared memory opaque data structure.">PShm</a> object.  <br /></td></tr>
<tr class="separator:afa9b9edfbcdb6fad5f187b405b32d9e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4391a1e1ac281a375ffa52dcc7ebc8d4" id="r_a4391a1e1ac281a375ffa52dcc7ebc8d4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4391a1e1ac281a375ffa52dcc7ebc8d4">p_shm_take_ownership</a> (<a class="el" href="#a242648937927f60bb00c5182324af26d">PShm</a> *shm)</td></tr>
<tr class="memdesc:a4391a1e1ac281a375ffa52dcc7ebc8d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Takes ownership of a shared memory segment.  <br /></td></tr>
<tr class="separator:a4391a1e1ac281a375ffa52dcc7ebc8d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab70e3135722e886cf9062c2786bc491e" id="r_ab70e3135722e886cf9062c2786bc491e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab70e3135722e886cf9062c2786bc491e">p_shm_free</a> (<a class="el" href="#a242648937927f60bb00c5182324af26d">PShm</a> *shm)</td></tr>
<tr class="memdesc:ab70e3135722e886cf9062c2786bc491e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees <a class="el" href="#a242648937927f60bb00c5182324af26d" title="Shared memory opaque data structure.">PShm</a> object.  <br /></td></tr>
<tr class="separator:ab70e3135722e886cf9062c2786bc491e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a140f3ea67b6afc2a1f32bac59ed5cfbf" id="r_a140f3ea67b6afc2a1f32bac59ed5cfbf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> <a class="el" href="ptypes_8h.html#af5cb791e13f977b94e0192f84a5f228b">pboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a140f3ea67b6afc2a1f32bac59ed5cfbf">p_shm_lock</a> (<a class="el" href="#a242648937927f60bb00c5182324af26d">PShm</a> *shm, <a class="el" href="perror_8h.html#a0ca29fda52d5b97f70f61234be28f1cd">PError</a> **error)</td></tr>
<tr class="memdesc:a140f3ea67b6afc2a1f32bac59ed5cfbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locks <a class="el" href="#a242648937927f60bb00c5182324af26d" title="Shared memory opaque data structure.">PShm</a> object for usage.  <br /></td></tr>
<tr class="separator:a140f3ea67b6afc2a1f32bac59ed5cfbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a682181d04fbdf3fdb9d10ae7a00a1167" id="r_a682181d04fbdf3fdb9d10ae7a00a1167"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> <a class="el" href="ptypes_8h.html#af5cb791e13f977b94e0192f84a5f228b">pboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a682181d04fbdf3fdb9d10ae7a00a1167">p_shm_unlock</a> (<a class="el" href="#a242648937927f60bb00c5182324af26d">PShm</a> *shm, <a class="el" href="perror_8h.html#a0ca29fda52d5b97f70f61234be28f1cd">PError</a> **error)</td></tr>
<tr class="memdesc:a682181d04fbdf3fdb9d10ae7a00a1167"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlocks <a class="el" href="#a242648937927f60bb00c5182324af26d" title="Shared memory opaque data structure.">PShm</a> object.  <br /></td></tr>
<tr class="separator:a682181d04fbdf3fdb9d10ae7a00a1167"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5896ac54cb37cea037f9abd86ffcff5e" id="r_a5896ac54cb37cea037f9abd86ffcff5e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> <a class="el" href="ptypes_8h.html#a4395e523ec472129d35143032d004f22">ppointer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5896ac54cb37cea037f9abd86ffcff5e">p_shm_get_address</a> (const <a class="el" href="#a242648937927f60bb00c5182324af26d">PShm</a> *shm)</td></tr>
<tr class="memdesc:a5896ac54cb37cea037f9abd86ffcff5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a starting address of a <a class="el" href="#a242648937927f60bb00c5182324af26d" title="Shared memory opaque data structure.">PShm</a> memory segment.  <br /></td></tr>
<tr class="separator:a5896ac54cb37cea037f9abd86ffcff5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f8df7e1a437ba53647bfbf142dfc73e" id="r_a1f8df7e1a437ba53647bfbf142dfc73e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> <a class="el" href="ptypes_8h.html#a25a50ea8cd288f85c8f366955716c080">psize</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1f8df7e1a437ba53647bfbf142dfc73e">p_shm_get_size</a> (const <a class="el" href="#a242648937927f60bb00c5182324af26d">PShm</a> *shm)</td></tr>
<tr class="memdesc:a1f8df7e1a437ba53647bfbf142dfc73e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the size of a <a class="el" href="#a242648937927f60bb00c5182324af26d" title="Shared memory opaque data structure.">PShm</a> memory segment.  <br /></td></tr>
<tr class="separator:a1f8df7e1a437ba53647bfbf142dfc73e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Shared memory. </p>
<dl class="section author"><dt>Author</dt><dd>Alexander Saprykin</dd></dl>
<p>Shared memory is a memory segment which can be accessed from several threads or processes. It provides an efficient way to transfer large blocks of data between processes. It can be used as any other regular memory segment in an application.</p>
<p>Shared memory acts like an inter-process communication method. This memory exchange implementation is process-wide so you can transfer data not only between the threads. But it makes this IPC method (actually like any other IPC method, as well) relatively heavy. Consider using other approaches instead if you do not need to cross the process boundary.</p>
<p>A shared memory segment doesn't provide any synchronization primitives itself which means that several processes or threads can concurrently write and read from it. This can lead to data consistency problems. To avoid such situations a locking mechanism is provided: use <a class="el" href="#a140f3ea67b6afc2a1f32bac59ed5cfbf" title="Locks PShm object for usage.">p_shm_lock()</a> before entering a critical section on the memory segment and <a class="el" href="#a682181d04fbdf3fdb9d10ae7a00a1167" title="Unlocks PShm object.">p_shm_unlock()</a> when leaving this section. The locking mechanism is working across the process boundary.</p>
<p>A process-wide shared memory segment is identified by its name across the system, thus it is also called a named memory segment. Use <a class="el" href="#afa9b9edfbcdb6fad5f187b405b32d9e5" title="Creates a new PShm object.">p_shm_new()</a> to open the named shared memory segment and <a class="el" href="#ab70e3135722e886cf9062c2786bc491e" title="Frees PShm object.">p_shm_free()</a> to close it.</p>
<p>Please note the following platform specific differences:</p>
<ul>
<li>Windows and OS/2 don't own IPC objects (processes own them), which means that a shared memory segment will be removed after the last process or thread detaches (or after terminating all the processes and threads attached to the segment) it.</li>
<li>UNIX systems own IPC objects. Because of that UNIX IPC objects can survive an application crash: the attached shared memory segment can contain data from the previous working session. This could happen if you have not detached from all the shared memory segments explicitly before terminating the application.</li>
<li>HP-UX has limitations due to its MPAS/MGAS features, so you couldn't attach to the same memory segment twice from the same process.</li>
<li>IRIX allows to open several instances of the same buffer within the single process, but it will close the object after the first close call from any of the threads within the process.</li>
<li>OpenVMS (as of 8.4 release) has broken implementation of process-wide named semaphores which leads to the broken shared memory also.</li>
<li>Syllable lacks support for process-wide named semaphores which leads to the absence of shared memory.</li>
<li>BeOS lacks support for process-wide named semaphores which leads to the absence of shared memory.</li>
</ul>
<p>You can take ownership of the shared memory segment with <a class="el" href="#a4391a1e1ac281a375ffa52dcc7ebc8d4" title="Takes ownership of a shared memory segment.">p_shm_take_ownership()</a> to explicitly remove it from the system after closing. </p>

<p class="definition">Definition in file <a class="el" href="pshm_8h_source.html">pshm.h</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a242648937927f60bb00c5182324af26d" name="a242648937927f60bb00c5182324af26d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a242648937927f60bb00c5182324af26d">&#9670;&#160;</a></span>PShm</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct PShm_ <a class="el" href="#a242648937927f60bb00c5182324af26d">PShm</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shared memory opaque data structure. </p>

<p class="definition">Definition at line <a class="el" href="pshm_8h_source.html#l00106">106</a> of file <a class="el" href="pshm_8h_source.html">pshm.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a442b1fac8b9fab89bc557518330d5569" name="a442b1fac8b9fab89bc557518330d5569"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a442b1fac8b9fab89bc557518330d5569">&#9670;&#160;</a></span>PShmAccessPerms_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#a442b1fac8b9fab89bc557518330d5569">PShmAccessPerms_</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enum with shared memory access permissions. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a442b1fac8b9fab89bc557518330d5569a246e6346dd1a012bd6f6d1d5c10bb702" name="a442b1fac8b9fab89bc557518330d5569a246e6346dd1a012bd6f6d1d5c10bb702"></a>P_SHM_ACCESS_READONLY&#160;</td><td class="fielddoc"><p>Read-only access. </p>
<p><br  />
 </p>
</td></tr>
<tr><td class="fieldname"><a id="a442b1fac8b9fab89bc557518330d5569ac060911ed831a35bb52ffe420d6c99ae" name="a442b1fac8b9fab89bc557518330d5569ac060911ed831a35bb52ffe420d6c99ae"></a>P_SHM_ACCESS_READWRITE&#160;</td><td class="fielddoc"><p>Read/write access. </p>
<p><br  />
 </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="pshm_8h_source.html#l00100">100</a> of file <a class="el" href="pshm_8h_source.html">pshm.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ab70e3135722e886cf9062c2786bc491e" name="ab70e3135722e886cf9062c2786bc491e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab70e3135722e886cf9062c2786bc491e">&#9670;&#160;</a></span>p_shm_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> void p_shm_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a242648937927f60bb00c5182324af26d">PShm</a> *</td>          <td class="paramname"><span class="paramname"><em>shm</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees <a class="el" href="#a242648937927f60bb00c5182324af26d" title="Shared memory opaque data structure.">PShm</a> object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shm</td><td><a class="el" href="#a242648937927f60bb00c5182324af26d" title="Shared memory opaque data structure.">PShm</a> to free. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>0.0.1</dd></dl>
<p>It doesn't unlock a given shared memory segment, be careful to not to make a deadlock or a segfault while freeing the memory segment which is under usage. </p>

</div>
</div>
<a id="a5896ac54cb37cea037f9abd86ffcff5e" name="a5896ac54cb37cea037f9abd86ffcff5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5896ac54cb37cea037f9abd86ffcff5e">&#9670;&#160;</a></span>p_shm_get_address()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> <a class="el" href="ptypes_8h.html#a4395e523ec472129d35143032d004f22">ppointer</a> p_shm_get_address </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="#a242648937927f60bb00c5182324af26d">PShm</a> *</td>          <td class="paramname"><span class="paramname"><em>shm</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets a starting address of a <a class="el" href="#a242648937927f60bb00c5182324af26d" title="Shared memory opaque data structure.">PShm</a> memory segment. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shm</td><td><a class="el" href="#a242648937927f60bb00c5182324af26d" title="Shared memory opaque data structure.">PShm</a> to get the address for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the starting address in case of success, NULL otherwise. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>0.0.1 </dd></dl>

</div>
</div>
<a id="a1f8df7e1a437ba53647bfbf142dfc73e" name="a1f8df7e1a437ba53647bfbf142dfc73e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f8df7e1a437ba53647bfbf142dfc73e">&#9670;&#160;</a></span>p_shm_get_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> <a class="el" href="ptypes_8h.html#a25a50ea8cd288f85c8f366955716c080">psize</a> p_shm_get_size </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="#a242648937927f60bb00c5182324af26d">PShm</a> *</td>          <td class="paramname"><span class="paramname"><em>shm</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the size of a <a class="el" href="#a242648937927f60bb00c5182324af26d" title="Shared memory opaque data structure.">PShm</a> memory segment. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shm</td><td><a class="el" href="#a242648937927f60bb00c5182324af26d" title="Shared memory opaque data structure.">PShm</a> to get the size for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Size of the given memory segment in case of success, 0 otherwise. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>0.0.1</dd></dl>
<p>Note that the returned size would be a slightly larger than specified during the <a class="el" href="#afa9b9edfbcdb6fad5f187b405b32d9e5" title="Creates a new PShm object.">p_shm_new()</a> call due to service information stored inside. </p>

</div>
</div>
<a id="a140f3ea67b6afc2a1f32bac59ed5cfbf" name="a140f3ea67b6afc2a1f32bac59ed5cfbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a140f3ea67b6afc2a1f32bac59ed5cfbf">&#9670;&#160;</a></span>p_shm_lock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> <a class="el" href="ptypes_8h.html#af5cb791e13f977b94e0192f84a5f228b">pboolean</a> p_shm_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a242648937927f60bb00c5182324af26d">PShm</a> *</td>          <td class="paramname"><span class="paramname"><em>shm</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="perror_8h.html#a0ca29fda52d5b97f70f61234be28f1cd">PError</a> **</td>          <td class="paramname"><span class="paramname"><em>error</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Locks <a class="el" href="#a242648937927f60bb00c5182324af26d" title="Shared memory opaque data structure.">PShm</a> object for usage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">shm</td><td><a class="el" href="#a242648937927f60bb00c5182324af26d" title="Shared memory opaque data structure.">PShm</a> to lock. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">error</td><td>Error report object, NULL to ignore. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE in case of success, FALSE otherwise. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>0.0.1</dd></dl>
<p>If the object is already locked then the thread will be suspended until the object becomes unlocked. </p>

</div>
</div>
<a id="afa9b9edfbcdb6fad5f187b405b32d9e5" name="afa9b9edfbcdb6fad5f187b405b32d9e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa9b9edfbcdb6fad5f187b405b32d9e5">&#9670;&#160;</a></span>p_shm_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> <a class="el" href="#a242648937927f60bb00c5182324af26d">PShm</a> * p_shm_new </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ptypes_8h.html#a248e4ab1104e259e4c6cf5714551060e">pchar</a> *</td>          <td class="paramname"><span class="paramname"><em>name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ptypes_8h.html#a25a50ea8cd288f85c8f366955716c080">psize</a></td>          <td class="paramname"><span class="paramname"><em>size</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#a5cf76ec703f7c61e51daa04db470a81f">PShmAccessPerms</a></td>          <td class="paramname"><span class="paramname"><em>perms</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="perror_8h.html#a0ca29fda52d5b97f70f61234be28f1cd">PError</a> **</td>          <td class="paramname"><span class="paramname"><em>error</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new <a class="el" href="#a242648937927f60bb00c5182324af26d" title="Shared memory opaque data structure.">PShm</a> object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">name</td><td>Shared memory name. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">size</td><td>Size of the memory segment in bytes, can't be changed later. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">perms</td><td>Memory segment permissions, see <a class="el" href="#a5cf76ec703f7c61e51daa04db470a81f" title="Enum with shared memory access permissions.">PShmAccessPerms</a>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">error</td><td>Error report object, NULL to ignore. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to a newly created <a class="el" href="#a242648937927f60bb00c5182324af26d" title="Shared memory opaque data structure.">PShm</a> object in case of success, NULL otherwise. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>0.0.1 </dd></dl>

</div>
</div>
<a id="a4391a1e1ac281a375ffa52dcc7ebc8d4" name="a4391a1e1ac281a375ffa52dcc7ebc8d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4391a1e1ac281a375ffa52dcc7ebc8d4">&#9670;&#160;</a></span>p_shm_take_ownership()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> void p_shm_take_ownership </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a242648937927f60bb00c5182324af26d">PShm</a> *</td>          <td class="paramname"><span class="paramname"><em>shm</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Takes ownership of a shared memory segment. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shm</td><td>Shared memory segment. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>0.0.1</dd></dl>
<p>If you take ownership of the shared memory object, <a class="el" href="#ab70e3135722e886cf9062c2786bc491e" title="Frees PShm object.">p_shm_free()</a> will try to completely unlink it and remove from the system. This is useful on UNIX systems where shared memory can survive an application crash. On the Windows and OS/2 platforms this call has no effect.</p>
<p>The common usage of this call is upon application startup to ensure that the memory segment from the previous crash will be unlinked from the system. To do that, call <a class="el" href="#afa9b9edfbcdb6fad5f187b405b32d9e5" title="Creates a new PShm object.">p_shm_new()</a> and check if its condition is normal (the segment size, the data). If not, take ownership of the shared memory object and remove it with the <a class="el" href="#ab70e3135722e886cf9062c2786bc491e" title="Frees PShm object.">p_shm_free()</a> call. After that, create it again. </p>

</div>
</div>
<a id="a682181d04fbdf3fdb9d10ae7a00a1167" name="a682181d04fbdf3fdb9d10ae7a00a1167"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a682181d04fbdf3fdb9d10ae7a00a1167">&#9670;&#160;</a></span>p_shm_unlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pmacros_8h.html#afc4a56cf925c0c90d086f3480ffc257c">P_LIB_API</a> <a class="el" href="ptypes_8h.html#af5cb791e13f977b94e0192f84a5f228b">pboolean</a> p_shm_unlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a242648937927f60bb00c5182324af26d">PShm</a> *</td>          <td class="paramname"><span class="paramname"><em>shm</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="perror_8h.html#a0ca29fda52d5b97f70f61234be28f1cd">PError</a> **</td>          <td class="paramname"><span class="paramname"><em>error</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unlocks <a class="el" href="#a242648937927f60bb00c5182324af26d" title="Shared memory opaque data structure.">PShm</a> object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">shm</td><td><a class="el" href="#a242648937927f60bb00c5182324af26d" title="Shared memory opaque data structure.">PShm</a> to unlock. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">error</td><td>Error report object, NULL to ignore. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE in case of success, FALSE otherwise. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>0.0.1 </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
